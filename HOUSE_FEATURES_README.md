[//]: # (# 房屋数据表格功能使用说明)

[//]: # ()
[//]: # (## 功能概述)

[//]: # ()
[//]: # (本系统实现了完整的房屋数据表格功能，包含分页、高级搜索、筛选、收藏、详情展示和评论等特性。)

[//]: # ()
[//]: # (## 主要功能)

[//]: # ()
[//]: # (### 1. 房屋列表页面 &#40;/houses&#41;)

[//]: # (- **分页功能**：支持自定义每页显示数量（12/24/36/48条）)

[//]: # (- **高级搜索**：)

[//]: # (  - 城市筛选（深圳、广州、佛山、东莞）)

[//]: # (  - 区域搜索)

[//]: # (  - 户型筛选（1室到4室多种选择）)

[//]: # (  - 朝向筛选（东、南、西、北等）)

[//]: # (  - 价格范围筛选)

[//]: # (  - 面积范围筛选)

[//]: # (  - 标签关键词搜索)

[//]: # (- **排序功能**：支持按价格、面积升序/降序排列)

[//]: # (- **收藏功能**：一键收藏/取消收藏房屋)

[//]: # (- **响应式设计**：适配不同屏幕尺寸)

[//]: # ()
[//]: # (### 2. 房屋详情页面)

[//]: # (- **图片展示**：轮播图形式展示房屋图片)

[//]: # (- **基本信息**：完整展示房屋各项参数)

[//]: # (- **详细信息表格**：结构化展示所有房屋信息)

[//]: # (- **外部链接**：直达原始房源页面)

[//]: # (- **评论系统**：)

[//]: # (  - 用户可发表评论和评分（1-5星）)

[//]: # (  - 实时显示所有评论)

[//]: # (  - 支持评论时间排序)

[//]: # ()
[//]: # (### 3. 用户行为追踪)

[//]: # (所有用户行为都会被记录到MySQL数据库：)

[//]: # (- 收藏行为（UserFavoriteBehavior）)

[//]: # (- 详情查看行为（UserDetailViewBehavior）)

[//]: # (- 评论行为（UserCommentBehavior）)

[//]: # ()
[//]: # (## 技术实现)

[//]: # ()
[//]: # (### 后端架构)

[//]: # (```)

[//]: # (houses/views.py          # 核心API视图)

[//]: # (houses/urls.py           # URL路由配置)

[//]: # (user/models.py           # 用户行为数据模型)

[//]: # (```)

[//]: # ()
[//]: # (### 前端架构)

[//]: # (```)

[//]: # (frontend/src/views/Houses.vue      # 房屋列表页面)

[//]: # (frontend/src/components/HouseDetail.vue  # 房屋详情组件)

[//]: # (```)

[//]: # ()
[//]: # (### 数据源)

[//]: # (- **主数据源**：Hive表 `dwd_house_data`)

[//]: # (- **字段包含**：city、method、building_name、room_type、city_district、district_area、area_sqm、orientation、tags、price、floor_type、floor_number、cover_image、detail_link、is_valid_data)

[//]: # ()
[//]: # (## API接口说明)

[//]: # ()
[//]: # (### 1. 获取房屋列表)

[//]: # (```)

[//]: # (GET /api/houses/list/)

[//]: # (参数：)

[//]: # (- page: 页码（默认1）)

[//]: # (- page_size: 每页数量（默认20）)

[//]: # (- sort_field: 排序字段（默认price）)

[//]: # (- sort_order: 排序顺序（asc/desc）)

[//]: # (- city: 城市筛选)

[//]: # (- city_district: 区域筛选)

[//]: # (- room_type: 户型筛选)

[//]: # (- min_price/max_price: 价格范围)

[//]: # (- min_area/max_area: 面积范围)

[//]: # (- orientation: 朝向筛选)

[//]: # (- tags: 标签搜索)

[//]: # (```)

[//]: # ()
[//]: # (### 2. 切换收藏状态)

[//]: # (```)

[//]: # (POST /api/houses/toggle-favorite/)

[//]: # (请求体：{"house_id": "房屋唯一标识"})

[//]: # (```)

[//]: # ()
[//]: # (### 3. 获取房屋详情)

[//]: # (```)

[//]: # (GET /api/houses/detail/<house_id>/)

[//]: # (```)

[//]: # ()
[//]: # (### 4. 获取房屋评论)

[//]: # (```)

[//]: # (GET /api/houses/comments/<house_id>/)

[//]: # (```)

[//]: # ()
[//]: # (### 5. 发表评论)

[//]: # (```)

[//]: # (POST /api/houses/add-comment/<house_id>/)

[//]: # (请求体：{"comment": "评论内容", "rating": 评分&#40;1-5&#41;})

[//]: # (```)

[//]: # ()
[//]: # (## 数据库模型)

[//]: # ()
[//]: # (### UserFavoriteBehavior（收藏行为）)

[//]: # (```python)

[//]: # (user: ForeignKey to User)

[//]: # (house_id: CharField  # 房屋唯一标识)

[//]: # (favorited_at: DateTimeField)

[//]: # (is_active: BooleanField  # 是否仍然收藏)

[//]: # (```)

[//]: # ()
[//]: # (### UserDetailViewBehavior（详情查看行为）)

[//]: # (```python)

[//]: # (user: ForeignKey to User)

[//]: # (house_id: CharField)

[//]: # (viewed_at: DateTimeField)

[//]: # (duration: IntegerField  # 查看时长（秒）)

[//]: # (```)

[//]: # ()
[//]: # (### UserCommentBehavior（评论行为）)

[//]: # (```python)

[//]: # (user: ForeignKey to User)

[//]: # (house_id: CharField)

[//]: # (comment: TextField)

[//]: # (commented_at: DateTimeField)

[//]: # (rating: IntegerField  # 评分（1-5）)

[//]: # (```)

[//]: # ()
[//]: # (## 使用流程)

[//]: # ()
[//]: # (### 1. 浏览房屋列表)

[//]: # (- 访问 `/houses` 页面)

[//]: # (- 使用搜索和筛选功能查找感兴趣的房源)

[//]: # (- 通过分页浏览更多房源)

[//]: # ()
[//]: # (### 2. 查看房屋详情)

[//]: # (- 点击任意房屋卡片)

[//]: # (- 在弹窗中查看详细信息)

[//]: # (- 可以收藏房屋或发表评论)

[//]: # ()
[//]: # (### 3. 互动功能)

[//]: # (- 收藏喜欢的房源)

[//]: # (- 发表评论和评分)

[//]: # (- 查看其他用户的评论)

[//]: # ()
[//]: # (## 部署要求)

[//]: # ()
[//]: # (### 后端依赖)

[//]: # (- Django 3.2+)

[//]: # (- PyHive 0.6.5+)

[//]: # (- MySQL数据库)

[//]: # (- Hive服务（包含dwd_house_data表）)

[//]: # ()
[//]: # (### 前端依赖)

[//]: # (- Vue 2.6+)

[//]: # (- Element UI 2.15+)

[//]: # (- axios)

[//]: # ()
[//]: # (### 环境变量)

[//]: # (确保以下配置正确：)

[//]: # (- Hive连接配置（backend/db_config.py）)

[//]: # (- MySQL数据库配置（backend/settings.py）)

[//]: # (- CSRF配置)

[//]: # ()
[//]: # (## 注意事项)

[//]: # ()
[//]: # (1. **权限控制**：收藏和评论功能需要用户登录)

[//]: # (2. **数据验证**：所有输入都经过严格验证)

[//]: # (3. **错误处理**：完善的异常处理机制)

[//]: # (4. **性能优化**：支持分页和索引优化)

[//]: # (5. **安全性**：CSRF保护和SQL注入防护)

[//]: # ()
[//]: # (## 测试验证)

[//]: # ()
[//]: # (运行测试脚本验证功能：)

[//]: # (```bash)

[//]: # (python test_house_features.py)

[//]: # (```)

[//]: # ()
[//]: # (该脚本会验证：)

[//]: # (- Hive连接)

[//]: # (- 数据查询功能)

[//]: # (- 用户行为模型)

[//]: # (- API端点配置)

[//]: # (- 前端组件文件)