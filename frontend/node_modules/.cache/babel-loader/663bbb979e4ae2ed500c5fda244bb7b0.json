{"remainingRequest":"E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\House-Price-Analysis-Spark\\frontend\\src\\components\\HeaderBar.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\House-Price-Analysis-Spark\\frontend\\src\\components\\HeaderBar.vue","mtime":1770780244668},{"path":"E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1769265189153},{"path":"E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1769265189294},{"path":"E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1769265189153},{"path":"E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1769265187754}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdIZWFkZXJCYXInLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyBhY3RpdmVJbmRleDogJzAnLAogICAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZhbHNlLAogICAgICB1c2VySW5mbzogewogICAgICAgIG5pY2tuYW1lOiAnJywKICAgICAgICBhdmF0YXI6ICcnCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdXNlckF2YXRhcigpIHsKICAgICAgcmV0dXJuIHRoaXMudXNlckluZm8uYXZhdGFyIHx8ICdodHRwczovL3NzMi5iZHN0YXRpYy5jb20vNzBjRnZYU2hfUTFZbnhHa3BvV0sxSEY2aGh5L2l0L3U9MTY1OTU1Mjc5MiwzODY5MzMyNDk2JmZtPTI1MyZncD0wLmpwZyc7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5jaGVja0F1dGhTdGF0dXMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdvVG9EYXNoYm9hcmQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJyk7CiAgICAgIC8vIHRoaXMuYWN0aXZlSW5kZXggPSAnMCcKICAgIH0sCiAgICBoYW5kbGVTZWxlY3Qoa2V5KSB7CiAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSBrZXk7CiAgICAgIHN3aXRjaCAoa2V5KSB7CiAgICAgICAgY2FzZSAnMSc6CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2hvbWUnKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJzInOgogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9ob3VzZXMnKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJzMnOgogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9yZWNvbW1lbmQnKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgY2hlY2tBdXRoU3RhdHVzKCkgewogICAgICAvLyDmo4Dmn6XmnKzlnLDlrZjlgqjkuK3nmoTorqTor4HnirbmgIEKICAgICAgY29uc3QgYXV0aFN0YXR1cyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpc0F1dGhlbnRpY2F0ZWQnKTsKICAgICAgY29uc3QgdXNlckluZm8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlckluZm8nKTsKICAgICAgaWYgKGF1dGhTdGF0dXMgPT09ICd0cnVlJyAmJiB1c2VySW5mbykgewogICAgICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID0gdHJ1ZTsKICAgICAgICB0aGlzLnVzZXJJbmZvID0gSlNPTi5wYXJzZSh1c2VySW5mbyk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBoYW5kbGVVc2VyQ29tbWFuZChjb21tYW5kKSB7CiAgICAgIHN3aXRjaCAoY29tbWFuZCkgewogICAgICAgIGNhc2UgJ3Byb2ZpbGUnOgogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy91c2VyJyk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdzZXR0aW5ncyc6CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oJ+iuvue9ruWKn+iDveW8gOWPkeS4rScpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnbG9nb3V0JzoKICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlTG9nb3V0KCk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGhhbmRsZUxvZ291dCgpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3VzZXIvbG9nb3V0LycsIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgICBpZiAoZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAvLyDmuIXpmaTmnKzlnLDlrZjlgqgKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdpc0F1dGhlbnRpY2F0ZWQnKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VySW5mbycpOwogICAgICAgICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTsKICAgICAgICAgIHRoaXMudXNlckluZm8gPSB7fTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn6YCA5Ye655m75b2V5oiQ5YqfJyk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZGF0YS5tZXNzYWdlIHx8ICfpgIDlh7rnmbvlvZXlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6YCA5Ye655m75b2V6ZSZ6K+vOicsIGVycm9yKTsKICAgICAgICAvLyDljbPkvb/mnI3liqHlmajor7fmsYLlpLHotKXvvIzkuZ/muIXpmaTmnKzlnLDnirbmgIEKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaXNBdXRoZW50aWNhdGVkJyk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXJJbmZvJyk7CiAgICAgICAgdGhpcy5pc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLnVzZXJJbmZvID0ge307CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgLy8g55uR5ZCs6Lev55Sx5Y+Y5YyW77yM5ZCM5q2l5r+A5rS76I+c5Y2V6aG5CiAgICAnJHJvdXRlJyh0bykgewogICAgICBjb25zdCByb3V0ZU1hcCA9IHsKICAgICAgICAnLyc6ICcwJywKICAgICAgICAnL2hvbWUnOiAnMScsCiAgICAgICAgJy9ob3VzZXMnOiAnMicsCiAgICAgICAgJy9yZWNvbW1lbmQnOiAnMycsCiAgICAgICAgJy91c2VyJzogJzQnCiAgICAgIH07CiAgICAgIC8vIOWkp+Wxj+mhtemdouS4jeaYvuekuua/gOa0u+eKtuaAgQogICAgICAvLyB0aGlzLmFjdGl2ZUluZGV4ID0gKHRvLnBhdGggPT09ICcvJykgPyAnJyA6IChyb3V0ZU1hcFt0by5wYXRoXSB8fCAnMScpCiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["name","data","isAuthenticated","userInfo","nickname","avatar","computed","userAvatar","mounted","checkAuthStatus","methods","goToDashboard","$router","push","handleSelect","key","activeIndex","authStatus","localStorage","getItem","JSON","parse","handleUserCommand","command","$message","info","handleLogout","response","fetch","method","headers","json","success","removeItem","error","message","console","watch","$route","to","routeMap"],"sources":["src/components/HeaderBar.vue"],"sourcesContent":["<template>\n  <div class=\"header-bar\">\n    <el-menu\n      :default-active=\"activeIndex\"\n      class=\"el-menu-demo\"\n      mode=\"horizontal\"\n      @select=\"handleSelect\"\n      background-color=\"#ffffff\"\n      text-color=\"#333\"\n      active-text-color=\"#667eea\"\n    >\n      <el-menu-item index=\"0\" @click=\"goToDashboard\">\n        <span class=\"logo\">üè† Êàø‰ª∑ÂàÜÊûêÁ≥ªÁªü</span>\n      </el-menu-item>\n\n      <el-menu-item index=\"1\">È¶ñÈ°µ</el-menu-item>\n      <el-menu-item index=\"2\">ÊàøÊ∫êÁÆ°ÁêÜ</el-menu-item>\n      <el-menu-item index=\"3\">Êô∫ËÉΩÊé®Ëçê</el-menu-item>\n      \n      <!-- Áî®Êà∑Âå∫Âüü - Âè≥ÂØπÈΩê -->\n      <div class=\"user-section\">\n        <template v-if=\"isAuthenticated\">\n          <!-- Â∑≤ÁôªÂΩïÁä∂ÊÄÅ -->\n          <el-dropdown @command=\"handleUserCommand\" trigger=\"click\">\n            <div class=\"user-info\">\n              <img \n                :src=\"userAvatar\" \n                :alt=\"userInfo.nickname\" \n                class=\"user-avatar\"\n              />\n              <span class=\"user-name\">{{ userInfo.nickname }}</span>\n              <i class=\"el-icon-arrow-down el-icon--right\"></i>\n            </div>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-dropdown-item command=\"profile\">‰∏™‰∫∫ËµÑÊñô</el-dropdown-item>\n              <el-dropdown-item command=\"settings\">ËÆæÁΩÆ</el-dropdown-item>\n              <el-dropdown-item divided command=\"logout\">ÈÄÄÂá∫ÁôªÂΩï</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </template>\n        <template v-else>\n          <!-- Êú™ÁôªÂΩïÁä∂ÊÄÅ -->\n          <div class=\"auth-buttons\">\n            <el-button \n              type=\"text\" \n              @click=\"$router.push('/login')\"\n              class=\"auth-btn\"\n            >\n              ÁôªÂΩï\n            </el-button>\n            <el-button \n              type=\"primary\" \n              @click=\"$router.push('/register')\"\n              class=\"auth-btn register-btn\"\n            >\n              Ê≥®ÂÜå\n            </el-button>\n          </div>\n        </template>\n      </div>\n    </el-menu>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'HeaderBar',\n  data() {\n    return {\n      // activeIndex: '0',\n      isAuthenticated: false,\n      userInfo: {\n        nickname: '',\n        avatar: ''\n      }\n    }\n  },\n  computed: {\n    userAvatar() {\n      return this.userInfo.avatar || 'https://ss2.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=1659552792,3869332496&fm=253&gp=0.jpg'\n    }\n  },\n  mounted() {\n    this.checkAuthStatus()\n  },\n  methods: {\n    goToDashboard() {\n      this.$router.push('/')\n      // this.activeIndex = '0'\n    },\n\n    handleSelect(key) {\n      this.activeIndex = key\n      switch(key) {\n        case '1':\n          this.$router.push('/home')\n          break\n        case '2':\n          this.$router.push('/houses')\n          break\n        case '3':\n          this.$router.push('/recommend')\n          break\n      }\n    },\n    \n    checkAuthStatus() {\n      // Ê£ÄÊü•Êú¨Âú∞Â≠òÂÇ®‰∏≠ÁöÑËÆ§ËØÅÁä∂ÊÄÅ\n      const authStatus = localStorage.getItem('isAuthenticated')\n      const userInfo = localStorage.getItem('userInfo')\n      \n      if (authStatus === 'true' && userInfo) {\n        this.isAuthenticated = true\n        this.userInfo = JSON.parse(userInfo)\n      }\n    },\n    \n    async handleUserCommand(command) {\n      switch(command) {\n        case 'profile':\n          this.$router.push('/user')\n          break\n        case 'settings':\n          this.$message.info('ËÆæÁΩÆÂäüËÉΩÂºÄÂèë‰∏≠')\n          break\n        case 'logout':\n          await this.handleLogout()\n          break\n      }\n    },\n    \n    async handleLogout() {\n      try {\n        const response = await fetch('/api/user/logout/', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          }\n        })\n        \n        const data = await response.json()\n        \n        if (data.success) {\n          // Ê∏ÖÈô§Êú¨Âú∞Â≠òÂÇ®\n          localStorage.removeItem('isAuthenticated')\n          localStorage.removeItem('userInfo')\n          \n          this.isAuthenticated = false\n          this.userInfo = {}\n          \n          this.$message.success('ÈÄÄÂá∫ÁôªÂΩïÊàêÂäü')\n          this.$router.push('/login')\n        } else {\n          this.$message.error(data.message || 'ÈÄÄÂá∫ÁôªÂΩïÂ§±Ë¥•')\n        }\n      } catch (error) {\n        console.error('ÈÄÄÂá∫ÁôªÂΩïÈîôËØØ:', error)\n        // Âç≥‰ΩøÊúçÂä°Âô®ËØ∑Ê±ÇÂ§±Ë¥•Ôºå‰πüÊ∏ÖÈô§Êú¨Âú∞Áä∂ÊÄÅ\n        localStorage.removeItem('isAuthenticated')\n        localStorage.removeItem('userInfo')\n        this.isAuthenticated = false\n        this.userInfo = {}\n        this.$router.push('/login')\n      }\n    }\n  },\n  watch: {\n    // ÁõëÂê¨Ë∑ØÁî±ÂèòÂåñÔºåÂêåÊ≠•ÊøÄÊ¥ªËèúÂçïÈ°π\n    '$route'(to) {\n      const routeMap = {\n        '/': '0',\n        '/home': '1',\n        '/houses': '2',\n        '/recommend': '3',\n        '/user': '4'\n      }\n      // Â§ßÂ±èÈ°µÈù¢‰∏çÊòæÁ§∫ÊøÄÊ¥ªÁä∂ÊÄÅ\n      // this.activeIndex = (to.path === '/') ? '' : (routeMap[to.path] || '1')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.header-bar {\n  box-shadow: 0 2px 12px rgba(0,0,0,.1);\n  background: white;\n}\n\n.el-menu-demo {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 20px;\n}\n\n.logo {\n  font-weight: bold;\n  font-size: 20px;\n  color: #667eea !important;\n}\n\n.user-section {\n  display: flex;\n  align-items: center;\n  margin-left: auto;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  padding: 8px 12px;\n  border-radius: 20px;\n  transition: background-color 0.3s ease;\n}\n\n.user-info:hover {\n  background-color: #f5f7fa;\n}\n\n.user-avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  margin-right: 8px;\n  object-fit: cover;\n  border: 2px solid #e1e5e9;\n}\n\n.user-name {\n  font-size: 14px;\n  font-weight: 500;\n  margin-right: 4px;\n  color: #333;\n}\n\n.auth-buttons {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.auth-btn {\n  font-size: 14px;\n  padding: 8px 16px;\n}\n\n.register-btn {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border: none;\n  color: white;\n}\n\n.register-btn:hover {\n  opacity: 0.9;\n  transform: translateY(-1px);\n}\n\n/* ÂìçÂ∫îÂºèËÆæËÆ° */\n@media (max-width: 768px) {\n  .el-menu-demo {\n    padding: 0 10px;\n  }\n  \n  .logo {\n    font-size: 16px;\n  }\n  \n  .user-name {\n    display: none;\n  }\n  \n  .auth-buttons {\n    gap: 5px;\n  }\n  \n  .auth-btn {\n    padding: 6px 12px;\n    font-size: 12px;\n  }\n}\n</style>"],"mappings":"AAiEA;EACAA,IAAA;EACAC,KAAA;IACA;MACA;MACAC,eAAA;MACAC,QAAA;QACAC,QAAA;QACAC,MAAA;MACA;IACA;EACA;EACAC,QAAA;IACAC,WAAA;MACA,YAAAJ,QAAA,CAAAE,MAAA;IACA;EACA;EACAG,QAAA;IACA,KAAAC,eAAA;EACA;EACAC,OAAA;IACAC,cAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;MACA;IACA;IAEAC,aAAAC,GAAA;MACA,KAAAC,WAAA,GAAAD,GAAA;MACA,QAAAA,GAAA;QACA;UACA,KAAAH,OAAA,CAAAC,IAAA;UACA;QACA;UACA,KAAAD,OAAA,CAAAC,IAAA;UACA;QACA;UACA,KAAAD,OAAA,CAAAC,IAAA;UACA;MACA;IACA;IAEAJ,gBAAA;MACA;MACA,MAAAQ,UAAA,GAAAC,YAAA,CAAAC,OAAA;MACA,MAAAhB,QAAA,GAAAe,YAAA,CAAAC,OAAA;MAEA,IAAAF,UAAA,eAAAd,QAAA;QACA,KAAAD,eAAA;QACA,KAAAC,QAAA,GAAAiB,IAAA,CAAAC,KAAA,CAAAlB,QAAA;MACA;IACA;IAEA,MAAAmB,kBAAAC,OAAA;MACA,QAAAA,OAAA;QACA;UACA,KAAAX,OAAA,CAAAC,IAAA;UACA;QACA;UACA,KAAAW,QAAA,CAAAC,IAAA;UACA;QACA;UACA,WAAAC,YAAA;UACA;MACA;IACA;IAEA,MAAAA,aAAA;MACA;QACA,MAAAC,QAAA,SAAAC,KAAA;UACAC,MAAA;UACAC,OAAA;YACA;UACA;QACA;QAEA,MAAA7B,IAAA,SAAA0B,QAAA,CAAAI,IAAA;QAEA,IAAA9B,IAAA,CAAA+B,OAAA;UACA;UACAd,YAAA,CAAAe,UAAA;UACAf,YAAA,CAAAe,UAAA;UAEA,KAAA/B,eAAA;UACA,KAAAC,QAAA;UAEA,KAAAqB,QAAA,CAAAQ,OAAA;UACA,KAAApB,OAAA,CAAAC,IAAA;QACA;UACA,KAAAW,QAAA,CAAAU,KAAA,CAAAjC,IAAA,CAAAkC,OAAA;QACA;MACA,SAAAD,KAAA;QACAE,OAAA,CAAAF,KAAA,YAAAA,KAAA;QACA;QACAhB,YAAA,CAAAe,UAAA;QACAf,YAAA,CAAAe,UAAA;QACA,KAAA/B,eAAA;QACA,KAAAC,QAAA;QACA,KAAAS,OAAA,CAAAC,IAAA;MACA;IACA;EACA;EACAwB,KAAA;IACA;IACA,QAAAC,CAAAC,EAAA;MACA,MAAAC,QAAA;QACA;QACA;QACA;QACA;QACA;MACA;MACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}