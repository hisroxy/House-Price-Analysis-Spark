{"remainingRequest":"E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\House-Price-Analysis-Spark\\frontend\\src\\views\\Houses.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\House-Price-Analysis-Spark\\frontend\\src\\views\\Houses.vue","mtime":1770782206368},{"path":"E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1769265189153},{"path":"E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1769265189294},{"path":"E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1769265189153},{"path":"E:\\House-Price-Analysis-Spark\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1769265187754}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEhvdXNlRGV0YWlsIGZyb20gJ0AvY29tcG9uZW50cy9Ib3VzZURldGFpbC52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0hvdXNlcycsCiAgY29tcG9uZW50czogewogICAgSG91c2VEZXRhaWwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgaG91c2VzOiBbXSwKICAgICAgc2VhcmNoRm9ybTogewogICAgICAgIGNpdHk6ICcnLAogICAgICAgIGNpdHlfZGlzdHJpY3Q6ICcnLAogICAgICAgIHJvb21fdHlwZTogJycsCiAgICAgICAgb3JpZW50YXRpb246ICcnLAogICAgICAgIG1pbl9wcmljZTogbnVsbCwKICAgICAgICBtYXhfcHJpY2U6IG51bGwsCiAgICAgICAgbWluX2FyZWE6IG51bGwsCiAgICAgICAgbWF4X2FyZWE6IG51bGwsCiAgICAgICAgdGFnczogJycKICAgICAgfSwKICAgICAgc29ydDogewogICAgICAgIGZpZWxkOiAncHJpY2VfYXNjJwogICAgICB9LAogICAgICBwYWdpbmF0aW9uOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBwYWdlX3NpemU6IDEyLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIHRvdGFsX3BhZ2VzOiAwCiAgICAgIH0sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBjdXJyZW50SG91c2U6IHt9CiAgICB9OwogIH0sCiAgYXN5bmMgbW91bnRlZCgpIHsKICAgIGF3YWl0IHRoaXMubG9hZEhvdXNlcygpOwogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgbG9hZEhvdXNlcygpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7CiAgICAgICAgcGFyYW1zLmFwcGVuZCgncGFnZScsIHRoaXMucGFnaW5hdGlvbi5wYWdlKTsKICAgICAgICBwYXJhbXMuYXBwZW5kKCdwYWdlX3NpemUnLCB0aGlzLnBhZ2luYXRpb24ucGFnZV9zaXplKTsKCiAgICAgICAgLy8g5re75Yqg5pCc57Si5p2h5Lu2CiAgICAgICAgT2JqZWN0LmtleXModGhpcy5zZWFyY2hGb3JtKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc2VhcmNoRm9ybVtrZXldOwogICAgICAgICAgaWYgKHZhbHVlICE9PSAnJyAmJiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIC8vIOaVsOWAvOexu+Wei+WPguaVsOWPquWcqOWkp+S6jjDml7bmt7vliqAKICAgICAgICAgICAgaWYgKFsnbWluX3ByaWNlJywgJ21heF9wcmljZScsICdtaW5fYXJlYScsICdtYXhfYXJlYSddLmluY2x1ZGVzKGtleSkpIHsKICAgICAgICAgICAgICBpZiAocGFyc2VGbG9hdCh2YWx1ZSkgPiAwKSB7CiAgICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKGtleSwgdmFsdWUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwYXJhbXMuYXBwZW5kKGtleSwgdmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIOa3u+WKoOaOkuW6jwogICAgICAgIGNvbnN0IFtmaWVsZCwgb3JkZXJdID0gdGhpcy5zb3J0LmZpZWxkLnNwbGl0KCdfJyk7CiAgICAgICAgcGFyYW1zLmFwcGVuZCgnc29ydF9maWVsZCcsIGZpZWxkKTsKICAgICAgICBwYXJhbXMuYXBwZW5kKCdzb3J0X29yZGVyJywgb3JkZXIpOwoKICAgICAgICAvLyDosIPor5Xml6Xlv5cKICAgICAgICBjb25zb2xlLmxvZygn6K+35rGC5Y+C5pWwOicsIHBhcmFtcy50b1N0cmluZygpKTsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KGAvYXBpL2hvdXNlcy9saXN0Lz8ke3BhcmFtcy50b1N0cmluZygpfWApOwogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMuaG91c2VzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmRhdGE7CiAgICAgICAgICB0aGlzLnBhZ2luYXRpb24udG90YWwgPSByZXNwb25zZS5kYXRhLmRhdGEudG90YWw7CiAgICAgICAgICB0aGlzLnBhZ2luYXRpb24udG90YWxfcGFnZXMgPSByZXNwb25zZS5kYXRhLmRhdGEudG90YWxfcGFnZXM7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YS5tZXNzYWdlIHx8ICfojrflj5bmiL/lsYvliJfooajlpLHotKUnKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5oi/5bGL5YiX6KGo5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfnvZHnu5zor7fmsYLlpLHotKUnKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIHNlYXJjaEhvdXNlcygpIHsKICAgICAgdGhpcy5wYWdpbmF0aW9uLnBhZ2UgPSAxOwogICAgICB0aGlzLmxvYWRIb3VzZXMoKTsKICAgIH0sCiAgICByZXNldFNlYXJjaCgpIHsKICAgICAgdGhpcy5zZWFyY2hGb3JtID0gewogICAgICAgIGNpdHk6ICcnLAogICAgICAgIGNpdHlfZGlzdHJpY3Q6ICcnLAogICAgICAgIHJvb21fdHlwZTogJycsCiAgICAgICAgb3JpZW50YXRpb246ICcnLAogICAgICAgIG1pbl9wcmljZTogbnVsbCwKICAgICAgICBtYXhfcHJpY2U6IG51bGwsCiAgICAgICAgbWluX2FyZWE6IG51bGwsCiAgICAgICAgbWF4X2FyZWE6IG51bGwsCiAgICAgICAgdGFnczogJycKICAgICAgfTsKICAgICAgdGhpcy5wYWdpbmF0aW9uLnBhZ2UgPSAxOwogICAgICB0aGlzLmxvYWRIb3VzZXMoKTsKICAgIH0sCiAgICBoYW5kbGVTb3J0Q2hhbmdlKCkgewogICAgICB0aGlzLmxvYWRIb3VzZXMoKTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhZ2luYXRpb24ucGFnZV9zaXplID0gdmFsOwogICAgICB0aGlzLnBhZ2luYXRpb24ucGFnZSA9IDE7CiAgICAgIHRoaXMubG9hZEhvdXNlcygpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMucGFnaW5hdGlvbi5wYWdlID0gdmFsOwogICAgICB0aGlzLmxvYWRIb3VzZXMoKTsKICAgIH0sCiAgICBhc3luYyB0b2dnbGVGYXZvcml0ZShob3VzZSkgewogICAgICBpZiAoIXRoaXMuaXNBdXRoZW50aWNhdGVkKCkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+WFiOeZu+W9lScpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnL2FwaS9ob3VzZXMvdG9nZ2xlLWZhdm9yaXRlLycsIHsKICAgICAgICAgIGhvdXNlX2lkOiBob3VzZS5ob3VzZV9pZAogICAgICAgIH0pOwogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIGhvdXNlLmlzX2Zhdm9yaXRlID0gcmVzcG9uc2UuZGF0YS5kYXRhLmlzX2Zhdm9yaXRlOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YS5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5YiH5o2i5pS26JeP54q25oCB5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmk43kvZzlpLHotKUnKTsKICAgICAgfQogICAgfSwKICAgIHZpZXdIb3VzZURldGFpbChob3VzZSkgewogICAgICB0aGlzLmN1cnJlbnRIb3VzZSA9IGhvdXNlOwogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIGZvcm1hdFRhZ3ModGFncykgewogICAgICBpZiAoIXRhZ3MgfHwgdGFncyA9PT0gJ+acquefpScpIHJldHVybiBbXTsKICAgICAgcmV0dXJuIHRhZ3Muc3BsaXQoJ+OAgScpLmZpbHRlcih0YWcgPT4gdGFnLnRyaW0oKSk7CiAgICB9LAogICAgZm9ybWF0UHJpY2UocHJpY2UpIHsKICAgICAgaWYgKCFwcmljZSkgcmV0dXJuICcwJzsKICAgICAgcmV0dXJuIHBhcnNlRmxvYXQocHJpY2UpLnRvTG9jYWxlU3RyaW5nKCk7CiAgICB9LAogICAgaXNBdXRoZW50aWNhdGVkKCkgewogICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lzQXV0aGVudGljYXRlZCcpID09PSAndHJ1ZSc7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["HouseDetail","name","components","data","loading","houses","searchForm","city","city_district","room_type","orientation","min_price","max_price","min_area","max_area","tags","sort","field","pagination","page","page_size","total","total_pages","dialogVisible","currentHouse","mounted","loadHouses","methods","params","URLSearchParams","append","Object","keys","forEach","key","value","undefined","includes","parseFloat","order","split","console","log","toString","response","$http","get","success","$message","error","message","searchHouses","resetSearch","handleSortChange","handleSizeChange","val","handleCurrentChange","toggleFavorite","house","isAuthenticated","warning","$router","push","post","house_id","is_favorite","viewHouseDetail","formatTags","filter","tag","trim","formatPrice","price","toLocaleString","localStorage","getItem"],"sources":["src/views/Houses.vue"],"sourcesContent":["<template>\n  <div class=\"houses-container\">\n    <!-- 搜索和筛选区域 -->\n    <el-card class=\"search-card\">\n      <div slot=\"header\" class=\"search-header\">\n        <span>房屋搜索</span>\n      </div>\n      \n      <el-form :model=\"searchForm\" label-width=\"80px\" class=\"search-form\">\n        <el-row :gutter=\"20\">\n          <el-col :span=\"6\">\n            <el-form-item label=\"城市\">\n              <el-select v-model=\"searchForm.city\" placeholder=\"请选择城市\" clearable>\n                <el-option label=\"深圳\" value=\"深圳\"></el-option>\n                <el-option label=\"广州\" value=\"广州\"></el-option>\n                <el-option label=\"佛山\" value=\"佛山\"></el-option>\n                <el-option label=\"东莞\" value=\"东莞\"></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          \n          <el-col :span=\"6\">\n            <el-form-item label=\"区域\">\n              <el-input v-model=\"searchForm.city_district\" placeholder=\"请输入区域\" clearable></el-input>\n            </el-form-item>\n          </el-col>\n          \n          <el-col :span=\"6\">\n            <el-form-item label=\"户型\">\n              <el-select v-model=\"searchForm.room_type\" placeholder=\"请选择户型\" clearable>\n                <el-option label=\"1室0厅\" value=\"1室0厅\"></el-option>\n                <el-option label=\"1室1厅\" value=\"1室1厅\"></el-option>\n                <el-option label=\"2室1厅\" value=\"2室1厅\"></el-option>\n                <el-option label=\"2室2厅\" value=\"2室2厅\"></el-option>\n                <el-option label=\"3室1厅\" value=\"3室1厅\"></el-option>\n                <el-option label=\"3室2厅\" value=\"3室2厅\"></el-option>\n                <el-option label=\"4室2厅\" value=\"4室2厅\"></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n          \n          <el-col :span=\"6\">\n            <el-form-item label=\"朝向\">\n              <el-select v-model=\"searchForm.orientation\" placeholder=\"请选择朝向\" clearable>\n                <el-option label=\"东\" value=\"东\"></el-option>\n                <el-option label=\"南\" value=\"南\"></el-option>\n                <el-option label=\"西\" value=\"西\"></el-option>\n                <el-option label=\"北\" value=\"北\"></el-option>\n                <el-option label=\"东南\" value=\"东南\"></el-option>\n                <el-option label=\"东北\" value=\"东北\"></el-option>\n                <el-option label=\"西南\" value=\"西南\"></el-option>\n                <el-option label=\"西北\" value=\"西北\"></el-option>\n              </el-select>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        \n        <el-row :gutter=\"20\">\n          <el-col :span=\"8\">\n            <el-form-item label=\"价格范围\">\n              <el-col :span=\"11\">\n                <el-input-number v-model=\"searchForm.min_price\" :min=\"0\" placeholder=\"最低价\" style=\"width: 100%\"></el-input-number>\n              </el-col>\n              <el-col class=\"line\" :span=\"2\" style=\"text-align: center\">-</el-col>\n              <el-col :span=\"11\">\n                <el-input-number v-model=\"searchForm.max_price\" :min=\"0\" placeholder=\"最高价\" style=\"width: 100%\"></el-input-number>\n              </el-col>\n            </el-form-item>\n          </el-col>\n          \n          <el-col :span=\"8\">\n            <el-form-item label=\"面积范围\">\n              <el-col :span=\"11\">\n                <el-input-number v-model=\"searchForm.min_area\" :min=\"0\" placeholder=\"最小面积\" style=\"width: 100%\"></el-input-number>\n              </el-col>\n              <el-col class=\"line\" :span=\"2\" style=\"text-align: center\">-</el-col>\n              <el-col :span=\"11\">\n                <el-input-number v-model=\"searchForm.max_area\" :min=\"0\" placeholder=\"最大面积\" style=\"width: 100%\"></el-input-number>\n              </el-col>\n            </el-form-item>\n          </el-col>\n          \n          <el-col :span=\"8\">\n            <el-form-item label=\"标签搜索\">\n              <el-input v-model=\"searchForm.tags\" placeholder=\"输入标签关键词\" clearable></el-input>\n            </el-form-item>\n          </el-col>\n        </el-row>\n        \n        <el-row>\n          <el-col :span=\"24\" style=\"text-align: right;\">\n            <el-button type=\"primary\" @click=\"searchHouses\" :loading=\"loading\">搜索</el-button>\n            <el-button @click=\"resetSearch\">重置</el-button>\n          </el-col>\n        </el-row>\n      </el-form>\n    </el-card>\n    \n    <!-- 排序和结果统计 -->\n    <div class=\"result-header\">\n      <div class=\"result-info\">\n        共找到 <span class=\"total-count\">{{ pagination.total }}</span> 套房源\n      </div>\n      <div class=\"sort-options\">\n        <span>排序：</span>\n        <el-select v-model=\"sort.field\" @change=\"handleSortChange\" size=\"small\">\n          <el-option label=\"价格升序\" value=\"price_asc\"></el-option>\n          <el-option label=\"价格降序\" value=\"price_desc\"></el-option>\n          <el-option label=\"面积升序\" value=\"area_sqm_asc\"></el-option>\n          <el-option label=\"面积降序\" value=\"area_sqm_desc\"></el-option>\n        </el-select>\n      </div>\n    </div>\n    \n    <!-- 房屋列表 -->\n    <div class=\"houses-grid\">\n      <el-card \n        v-for=\"(house, index) in houses\" \n        :key=\"`${house.house_id}_${index}`\" \n        class=\"house-card\"\n        @click.native=\"viewHouseDetail(house)\"\n      >\n        <div class=\"house-content\">\n          <!-- 收藏按钮 -->\n          <div class=\"favorite-btn\" @click.stop=\"toggleFavorite(house)\">\n            <i :class=\"house.is_favorite ? 'el-icon-star-on' : 'el-icon-star-off'\"></i>\n          </div>\n          \n          <!-- 房屋基本信息 -->\n          <div class=\"house-info\">\n            <h3 class=\"house-title\">{{ house.building_name }}</h3>\n            <div class=\"house-tags\">\n              <el-tag size=\"mini\" v-if=\"house.method\">{{ house.method }}</el-tag>\n              <el-tag size=\"mini\" type=\"success\" v-if=\"house.room_type\">{{ house.room_type }}</el-tag>\n              <el-tag size=\"mini\" type=\"warning\" v-if=\"house.orientation\">{{ house.orientation }}</el-tag>\n              <el-tag size=\"mini\" type=\"info\" v-for=\"tag in formatTags(house.tags)\" :key=\"tag\">{{ tag }}</el-tag>\n            </div>\n            \n            <div class=\"house-details\">\n              <div class=\"detail-item\">\n                <i class=\"el-icon-location-outline\"></i>\n                <span>{{ house.city }} {{ house.city_district }} {{ house.district_area }}</span>\n              </div>\n              <div class=\"detail-item\">\n                <i class=\"el-icon-house\"></i>\n                <span>{{ house.area_sqm }}㎡</span>\n              </div>\n              <div class=\"detail-item\">\n                <i class=\"el-icon-sort\"></i>\n                <span>{{ house.floor_type }} {{ house.floor_number }}层</span>\n              </div>\n            </div>\n            \n            <div class=\"house-price\">\n              <span class=\"price-number\">¥{{ formatPrice(house.price) }}</span>\n              <span class=\"price-unit\">/月</span>\n            </div>\n          </div>\n        </div>\n      </el-card>\n    </div>\n    \n    <!-- 分页 -->\n    <div class=\"pagination-container\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pagination.page\"\n        :page-sizes=\"[12, 24, 36, 48]\"\n        :page-size=\"pagination.page_size\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"pagination.total\">\n      </el-pagination>\n    </div>\n    \n    <!-- 房屋详情对话框 -->\n    <house-detail \n      v-if=\"dialogVisible\" \n      :house=\"currentHouse\"\n      :visible=\"dialogVisible\"\n      @close=\"dialogVisible = false\"\n    ></house-detail>\n  </div>\n</template>\n\n<script>\nimport HouseDetail from '@/components/HouseDetail.vue'\n\nexport default {\n  name: 'Houses',\n  components: {\n    HouseDetail\n  },\n  data() {\n    return {\n      loading: false,\n      houses: [],\n      searchForm: {\n        city: '',\n        city_district: '',\n        room_type: '',\n        orientation: '',\n        min_price: null,\n        max_price: null,\n        min_area: null,\n        max_area: null,\n        tags: ''\n      },\n      sort: {\n        field: 'price_asc'\n      },\n      pagination: {\n        page: 1,\n        page_size: 12,\n        total: 0,\n        total_pages: 0\n      },\n      dialogVisible: false,\n      currentHouse: {}\n    }\n  },\n  async mounted() {\n    await this.loadHouses()\n  },\n  methods: {\n    async loadHouses() {\n      this.loading = true\n      try {\n        const params = new URLSearchParams()\n        params.append('page', this.pagination.page)\n        params.append('page_size', this.pagination.page_size)\n        \n        // 添加搜索条件\n        Object.keys(this.searchForm).forEach(key => {\n          const value = this.searchForm[key];\n          if (value !== '' && value !== null && value !== undefined) {\n            // 数值类型参数只在大于0时添加\n            if (['min_price', 'max_price', 'min_area', 'max_area'].includes(key)) {\n              if (parseFloat(value) > 0) {\n                params.append(key, value);\n              }\n            } else {\n              params.append(key, value);\n            }\n          }\n        })\n        \n        // 添加排序\n        const [field, order] = this.sort.field.split('_')\n        params.append('sort_field', field)\n        params.append('sort_order', order)\n        \n        // 调试日志\n        console.log('请求参数:', params.toString())\n        \n        const response = await this.$http.get(`/api/houses/list/?${params.toString()}`)\n        \n        if (response.data.success) {\n          this.houses = response.data.data.data\n          this.pagination.total = response.data.data.total\n          this.pagination.total_pages = response.data.data.total_pages\n        } else {\n          this.$message.error(response.data.message || '获取房屋列表失败')\n        }\n      } catch (error) {\n        console.error('获取房屋列表失败:', error)\n        this.$message.error('网络请求失败')\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    searchHouses() {\n      this.pagination.page = 1\n      this.loadHouses()\n    },\n    \n    resetSearch() {\n      this.searchForm = {\n        city: '',\n        city_district: '',\n        room_type: '',\n        orientation: '',\n        min_price: null,\n        max_price: null,\n        min_area: null,\n        max_area: null,\n        tags: ''\n      }\n      this.pagination.page = 1\n      this.loadHouses()\n    },\n    \n    handleSortChange() {\n      this.loadHouses()\n    },\n    \n    handleSizeChange(val) {\n      this.pagination.page_size = val\n      this.pagination.page = 1\n      this.loadHouses()\n    },\n    \n    handleCurrentChange(val) {\n      this.pagination.page = val\n      this.loadHouses()\n    },\n    \n    async toggleFavorite(house) {\n      if (!this.isAuthenticated()) {\n        this.$message.warning('请先登录')\n        this.$router.push('/login')\n        return\n      }\n      \n      try {\n        const response = await this.$http.post('/api/houses/toggle-favorite/', {\n          house_id: house.house_id\n        })\n        \n        if (response.data.success) {\n          house.is_favorite = response.data.data.is_favorite\n          this.$message.success(response.data.message)\n        } else {\n          this.$message.error(response.data.message)\n        }\n      } catch (error) {\n        console.error('切换收藏状态失败:', error)\n        this.$message.error('操作失败')\n      }\n    },\n    \n    viewHouseDetail(house) {\n      this.currentHouse = house\n      this.dialogVisible = true\n    },\n    \n    formatTags(tags) {\n      if (!tags || tags === '未知') return []\n      return tags.split('、').filter(tag => tag.trim())\n    },\n    \n    formatPrice(price) {\n      if (!price) return '0'\n      return parseFloat(price).toLocaleString()\n    },\n    \n    isAuthenticated() {\n      return localStorage.getItem('isAuthenticated') === 'true'\n    }\n  }\n}\n</script>\n\n<style scoped>\n.houses-container {\n  padding: 20px;\n  background-color: #f5f7fa;\n  min-height: calc(100vh - 60px);\n}\n\n.search-card {\n  margin-bottom: 20px;\n}\n\n.search-header {\n  font-size: 18px;\n  font-weight: bold;\n  color: #333;\n}\n\n.search-form >>> .el-form-item {\n  margin-bottom: 15px;\n}\n\n.result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n  padding: 15px 20px;\n  background: white;\n  border-radius: 4px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n.result-info {\n  font-size: 16px;\n  color: #666;\n}\n\n.total-count {\n  color: #409EFF;\n  font-weight: bold;\n  font-size: 18px;\n}\n\n.sort-options {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.houses-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\n  gap: 20px;\n  margin-bottom: 30px;\n}\n\n.house-card {\n  cursor: pointer;\n  transition: all 0.3s ease;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.house-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 25px rgba(0,0,0,0.15);\n}\n\n.house-content {\n  position: relative;\n}\n\n.favorite-btn {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  width: 32px;\n  height: 32px;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  z-index: 10;\n}\n\n.favorite-btn:hover {\n  background: rgba(255, 255, 255, 1);\n  transform: scale(1.1);\n}\n\n.favorite-btn i {\n  font-size: 18px;\n  color: #ffd700;\n}\n\n.house-info {\n  padding: 15px;\n}\n\n.house-title {\n  font-size: 16px;\n  font-weight: bold;\n  margin: 0 0 10px 0;\n  color: #333;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.house-tags {\n  margin-bottom: 12px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 5px;\n}\n\n.house-details {\n  margin-bottom: 15px;\n}\n\n.detail-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 5px;\n  font-size: 13px;\n  color: #666;\n}\n\n.detail-item i {\n  margin-right: 5px;\n  color: #409EFF;\n}\n\n.house-price {\n  display: flex;\n  align-items: baseline;\n}\n\n.price-number {\n  font-size: 20px;\n  font-weight: bold;\n  color: #ff6b6b;\n}\n\n.price-unit {\n  font-size: 14px;\n  color: #666;\n  margin-left: 5px;\n}\n\n.pagination-container {\n  display: flex;\n  justify-content: center;\n  padding: 20px 0;\n  background: white;\n  border-radius: 4px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n/* 对话框样式 */\n.house-detail-dialog >>> .el-dialog {\n  border-radius: 8px;\n}\n\n.house-detail-dialog >>> .el-dialog__header {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 20px;\n  border-radius: 8px 8px 0 0;\n}\n\n.house-detail-dialog >>> .el-dialog__title {\n  color: white;\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.house-detail-dialog >>> .el-dialog__body {\n  padding: 0;\n}\n</style>"],"mappings":"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","ignoreList":[]}]}